<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - SecureSpace</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --dark: #2C3E50;
        }

        body {
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0%   { background-position: 0% 50%; }
            50%  { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .particles { position: fixed; width: 100%; height: 100%; overflow: hidden; pointer-events: none; z-index: 1; }
        .particle  { position: absolute; background: rgba(255,255,255,0.15); border-radius: 50%; animation: float 20s infinite; }
        .particle:nth-child(1) { width:80px;  height:80px;  left:10%; animation-duration:15s; }
        .particle:nth-child(2) { width:60px;  height:60px;  left:70%; animation-delay:2s; animation-duration:18s; }
        .particle:nth-child(3) { width:100px; height:100px; left:40%; animation-delay:4s; animation-duration:22s; }
        .particle:nth-child(4) { width:50px;  height:50px;  left:85%; animation-delay:1s; animation-duration:16s; }
        .particle:nth-child(5) { width:70px;  height:70px;  left:25%; animation-delay:3s; animation-duration:20s; }

        @keyframes float {
            0%   { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10%  { opacity: 1; }
            90%  { opacity: 1; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        /* ── LOGIN SUCCESS MODAL ── */
        .success-overlay {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.75);
            display: none; justify-content: center; align-items: center;
            z-index: 9999;
        }
        .success-overlay.active { display: flex; animation: fadeIn 0.3s ease-out; }

        @keyframes fadeIn  { from { opacity:0; } to { opacity:1; } }
        @keyframes scaleIn { from { opacity:0; transform:scale(0.8); } to { opacity:1; transform:scale(1); } }

        .success-modal {
            background: white; border-radius: 30px; padding: 50px;
            text-align: center; max-width: 500px; width: 90%;
            box-shadow: 0 30px 80px rgba(0,0,0,0.3);
            animation: scaleIn 0.5s ease-out;
        }
        .success-icon {
            width:100px; height:100px;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            border-radius:50%; display:flex; justify-content:center; align-items:center;
            margin: 0 auto 30px;
            animation: spin 0.8s ease-out 0.3s both;
        }
        @keyframes spin {
            0%   { transform: scale(0) rotate(0deg); }
            50%  { transform: scale(1.2) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }
        .success-icon svg { width:60px; height:60px; fill:white; }
        .success-modal h1 { font-family:'Playfair Display',serif; font-size:36px; color:var(--dark); margin-bottom:15px; }
        .success-modal p  { font-size:15px; color:#7f8c8d; margin-bottom:8px; }
        .success-email    { font-weight:600; color:var(--primary); font-size:18px; margin:18px 0; }
        .continue-btn {
            margin-top:28px; padding:15px 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color:white; border:none; border-radius:12px;
            font-size:16px; font-weight:600; cursor:pointer;
            transition:all 0.3s; text-transform:uppercase; letter-spacing:1px;
            font-family:'Poppins',sans-serif;
        }
        .continue-btn:hover { transform:translateY(-2px); box-shadow:0 10px 30px rgba(102,126,234,0.4); }

        /* ── LOGOUT CONFIRM MODAL ── */
        .logout-overlay {
            position:fixed; top:0; left:0; width:100%; height:100%;
            background:rgba(0,0,0,0.65); backdrop-filter:blur(4px);
            display:none; justify-content:center; align-items:center; z-index:9998;
        }
        .logout-overlay.active { display:flex; animation:fadeIn 0.25s ease-out; }

        .logout-modal {
            background:white; border-radius:28px; padding:48px 44px;
            text-align:center; max-width:420px; width:90%;
            box-shadow:0 40px 100px rgba(0,0,0,0.25);
            animation:scaleIn 0.35s cubic-bezier(0.34,1.56,0.64,1);
        }
        .logout-modal-icon {
            width:80px; height:80px;
            background:linear-gradient(135deg,#ff6b6b,#ee5a24);
            border-radius:50%; display:flex; justify-content:center; align-items:center;
            margin: 0 auto 24px;
        }
        .logout-modal-icon svg { width:40px; height:40px; fill:white; }
        .logout-modal h2 { font-family:'Playfair Display',serif; font-size:28px; color:var(--dark); margin-bottom:12px; }
        .logout-modal p  { font-size:15px; color:#7f8c8d; line-height:1.6; margin-bottom:32px; }
        .logout-modal-actions { display:flex; gap:14px; }
        .btn-cancel {
            flex:1; padding:14px; background:#f1f2f6; color:var(--dark);
            border:none; border-radius:12px; font-size:15px; font-weight:600;
            cursor:pointer; transition:all 0.25s; font-family:'Poppins',sans-serif;
        }
        .btn-cancel:hover { background:#dfe4ea; transform:translateY(-1px); }
        .btn-confirm-logout {
            flex:1; padding:14px;
            background:linear-gradient(135deg,#ff6b6b,#ee5a24);
            color:white; border:none; border-radius:12px;
            font-size:15px; font-weight:600; cursor:pointer;
            transition:all 0.25s; font-family:'Poppins',sans-serif;
        }
        .btn-confirm-logout:hover { transform:translateY(-1px); box-shadow:0 8px 24px rgba(238,90,36,0.35); }

        /* ── MAIN LAYOUT ── */
        .container { position:relative; z-index:10; min-height:100vh; padding:20px; }

        .header {
            display:flex; justify-content:space-between; align-items:center;
            background:rgba(255,255,255,0.15); backdrop-filter:blur(10px);
            border:1px solid rgba(255,255,255,0.2); border-radius:20px;
            padding:20px 30px; margin-bottom:30px;
            animation:slideDown 0.6s ease-out;
        }
        @keyframes slideDown { from { opacity:0; transform:translateY(-50px); } to { opacity:1; transform:translateY(0); } }

        .logo { display:flex; align-items:center; gap:15px; color:white; }
        .logo-icon { width:50px; height:50px; background:rgba(255,255,255,0.2); border-radius:50%; display:flex; justify-content:center; align-items:center; }
        .logo-icon svg { width:30px; height:30px; fill:white; }
        .logo h2 { font-family:'Playfair Display',serif; font-size:24px; font-weight:700; }

        .user-menu { display:flex; align-items:center; gap:20px; }
        .user-info { text-align:right; color:white; }
        .user-name { font-weight:600; font-size:16px; margin-bottom:3px; }
        .user-role { font-size:12px; opacity:0.8; }

        .header-btn {
            padding:10px 25px;
            background:rgba(255,255,255,0.2);
            color:white; border:2px solid rgba(255,255,255,0.4);
            border-radius:10px; font-size:14px; font-weight:600;
            cursor:pointer; transition:all 0.3s;
            font-family:'Poppins',sans-serif;
        }
        .header-btn:hover { background:rgba(255,255,255,0.35); transform:translateY(-2px); }

        .welcome-section {
            background:white; border-radius:30px; padding:50px; margin-bottom:30px;
            box-shadow:0 20px 60px rgba(0,0,0,0.2);
            animation:slideUp 0.8s ease-out;
        }
        @keyframes slideUp { from { opacity:0; transform:translateY(50px); } to { opacity:1; transform:translateY(0); } }

        .welcome-section h1 { font-family:'Playfair Display',serif; font-size:48px; color:var(--dark); margin-bottom:15px; }
        .welcome-section p  { font-size:18px; color:#7f8c8d; line-height:1.6; }

        .dashboard-grid {
            display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
            gap:25px; animation:fadeInUp 1s ease-out;
        }
        @keyframes fadeInUp { from { opacity:0; transform:translateY(30px); } to { opacity:1; transform:translateY(0); } }

        .dashboard-card {
            background:white; border-radius:20px; padding:35px;
            box-shadow:0 10px 30px rgba(0,0,0,0.1);
            transition:all 0.3s ease; cursor:pointer;
        }
        .dashboard-card:hover { transform:translateY(-10px); box-shadow:0 20px 50px rgba(0,0,0,0.2); }
        .card-icon { width:70px; height:70px; border-radius:50%; display:flex; justify-content:center; align-items:center; margin-bottom:20px; }
        .card-icon svg { width:35px; height:35px; fill:white; }
        .card-icon.purple { background:linear-gradient(135deg,#667eea,#764ba2); }
        .card-icon.green  { background:linear-gradient(135deg,#2ecc71,#27ae60); }
        .card-icon.orange { background:linear-gradient(135deg,#f39c12,#e67e22); }
        .card-icon.blue   { background:linear-gradient(135deg,#3498db,#2980b9); }
        .card-title       { font-size:22px; font-weight:600; color:var(--dark); margin-bottom:10px; }
        .card-description { font-size:14px; color:#7f8c8d; line-height:1.6; }

        @media (max-width:768px) {
            .header { flex-direction:column; gap:20px; }
            .user-menu { flex-direction:column; width:100%; }
            .header-btn { width:100%; }
            .welcome-section { padding:30px; }
            .welcome-section h1 { font-size:36px; }
            .logout-modal-actions { flex-direction:column; }
        }
    </style>
</head>
<body>

    <div class="particles">
        <div class="particle"></div><div class="particle"></div>
        <div class="particle"></div><div class="particle"></div>
        <div class="particle"></div>
    </div>

    <!-- ── Login Success Modal ── -->
    <div class="success-overlay" id="successOverlay">
        <div class="success-modal">
            <div class="success-icon">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
            </div>
            <h1>Login Successful!</h1>
            <p>Welcome back to SecureSpace</p>
            <div class="success-email" id="displayEmail"></div>
            <p style="font-size:14px;">You have successfully logged into your account</p>
            <button class="continue-btn" onclick="closeSuccessModal()">Continue to Dashboard</button>
        </div>
    </div>

    <!-- ── Logout Confirm Modal ── -->
    <div class="logout-overlay" id="logoutOverlay">
        <div class="logout-modal">
            <div class="logout-modal-icon">
                <svg viewBox="0 0 24 24"><path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5-5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/></svg>
            </div>
            <h2>Logging Out?</h2>
            <p>Are you sure you want to log out of your SecureSpace account?</p>
            <div class="logout-modal-actions">
                <button class="btn-cancel" onclick="cancelLogout()">Cancel</button>
                <button class="btn-confirm-logout" onclick="confirmLogout()">Yes, Logout</button>
            </div>
        </div>
    </div>

    <!-- ── Dashboard ── -->
    <div class="container">
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24"><path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V9.99h7V2.06l8 3.94v7.99h-8z"/></svg>
                </div>
                <h2>SecureSpace</h2>
            </div>
            <div class="user-menu">
                <div class="user-info" id="userInfoBlock" style="display:none;">
                    <div class="user-name" id="userName"></div>
                    <div class="user-role">Premium Member</div>
                </div>
                <!-- LOGIN button — visible when logged out -->
                <button class="header-btn" id="loginBtn" onclick="goToLogin()">Login</button>
                <!-- LOGOUT button — visible when logged in -->
                <button class="header-btn" id="logoutBtn" style="display:none;" onclick="showLogoutModal()">Logout</button>
            </div>
        </header>

        <section class="welcome-section">
            <h1 id="welcomeTitle">Welcome to SecureSpace</h1>
            <p id="welcomeDesc">Please login to access your full dashboard. Click the <strong>Login</strong> button in the top right to get started.</p>
        </section>

        <div class="dashboard-grid">
            <div class="dashboard-card">
                <div class="card-icon purple">
                    <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                </div>
                <div class="card-title">Profile</div>
                <div class="card-description">View and edit your personal information, preferences, and account settings.</div>
            </div>
            <div class="dashboard-card">
                <div class="card-icon green">
                    <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V9.99h7V3.42l5 2.37v4.2h-5z"/></svg>
                </div>
                <div class="card-title">Security</div>
                <div class="card-description">Manage your security settings, two-factor authentication, and password.</div>
            </div>
            <div class="dashboard-card">
                <div class="card-icon orange">
                    <svg viewBox="0 0 24 24"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
                </div>
                <div class="card-title">Activity</div>
                <div class="card-description">Review your recent account activity and login history for security.</div>
            </div>
            <div class="dashboard-card">
                <div class="card-icon blue">
                    <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                </div>
                <div class="card-title">Settings</div>
                <div class="card-description">Customize your experience with notification preferences and more.</div>
            </div>
        </div>
    </div>

    <script>
        function init() {
            const urlParams      = new URLSearchParams(window.location.search);
            const emailFromLogin = urlParams.get('email');
            const rememberMe     = urlParams.get('remember') === 'true';

            if (emailFromLogin) {
                // ── Just came from login page ──
                if (rememberMe) localStorage.setItem('userEmail', emailFromLogin);
                else            sessionStorage.setItem('userEmail', emailFromLogin);

                showLoggedInState(emailFromLogin);
                showSuccessModal(emailFromLogin);

                // Remove email from URL so refresh doesn't re-trigger modal
                window.history.replaceState({}, '', 'dashboard.html');

            } else {
                // ── Check if already logged in ──
                const saved = localStorage.getItem('userEmail') || sessionStorage.getItem('userEmail');
                if (saved) {
                    showLoggedInState(saved);
                } else {
                    showLoggedOutState();
                }
            }
        }

        function showLoggedInState(email) {
            const name = email.split('@')[0];
            const display = name.charAt(0).toUpperCase() + name.slice(1);

            document.getElementById('userName').textContent        = display;
            document.getElementById('userInfoBlock').style.display = 'block';
            document.getElementById('loginBtn').style.display      = 'none';
            document.getElementById('logoutBtn').style.display     = 'inline-block';
            document.getElementById('welcomeTitle').textContent    = `Welcome Back, ${display}!`;
            document.getElementById('welcomeDesc').textContent     = "Great to see you again! You're now logged into your SecureSpace dashboard. Explore your account features and stay secure online.";
        }

        function showLoggedOutState() {
            document.getElementById('userInfoBlock').style.display = 'none';
            document.getElementById('loginBtn').style.display      = 'inline-block';
            document.getElementById('logoutBtn').style.display     = 'none';
            document.getElementById('welcomeTitle').textContent    = 'Welcome to SecureSpace';
            document.getElementById('welcomeDesc').innerHTML       = 'Please login to access your full dashboard. Click the <strong>Login</strong> button in the top right to get started.';
        }

        function showSuccessModal(email) {
            document.getElementById('displayEmail').textContent = email;
            document.getElementById('successOverlay').classList.add('active');
            setTimeout(closeSuccessModal, 3000);
        }

        function closeSuccessModal() {
            document.getElementById('successOverlay').classList.remove('active');
        }

        function showLogoutModal()  { document.getElementById('logoutOverlay').classList.add('active'); }
        function cancelLogout()     { document.getElementById('logoutOverlay').classList.remove('active'); }

        function confirmLogout() {
            localStorage.removeItem('userEmail');
            sessionStorage.removeItem('userEmail');
            document.getElementById('logoutOverlay').classList.remove('active');
            showLoggedOutState();
        }

        function goToLogin() {
            window.location.href = 'login.html';
        }

        init();
    </script>
</body>
</html>